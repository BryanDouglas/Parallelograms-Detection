%matlab?????????????
clear
close all

img=imread('TestImage2c.jpg');
sigma=6;%?????
window=double(uint8(3*sigma)*2+1);%???????3*sigma

H=fspecial('gaussian', window, sigma);%fspecial('gaussian', hsize, sigma)??????
%????????????'replicate'????????????????????????
img_gauss=imfilter(img,H,'replicate');
img_gauss2=rgb2gray(img_gauss);
figure
img2=edge(img_gauss2,'Canny',0.1);%2 0.182

subplot(2,1,1),imshow(img),title('????');
subplot(2,1,2),imshow(img_gauss),title('?????'); 

figure
imshow(img2);
imwrite(img2,'test2gauss.jpg');